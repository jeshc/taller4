<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>B&aacute;sico websockets</title>
    <!--
      <script src="https://cdn.socket.io/socket.io-1.3.5.js">
    -->
    <script src="http://localhost:8082/socket.io/socket.io.js"></script>
  </head>
  <body>
    <div class="">
      Room:<input type="text" id="cuarto" name="" value=""><br>
      Nick:<input type="text" id="nick" name="" value="" placeholder="Tu nick"><br>
      Mensaje:<input type="text"  id="mensaje" name="" value="" placeholder="tu mensaje">
      <button type="button" onclick="mandarMensaje()"  name="button">Conectarse</button>
    </div>

    <script type="text/javascript">
    var usuario={
      "cuarto":"",
      "nick" : "",
      "mensaje" : ""
    }
    var chat = io.connect('http://localhost:8082');
    chat.on('connect', function () {
      console.log('conectado');

      chat.on('respServer',function(data){
        console.log(data);
      });
      chat.on('chat',function(data){
        console.log(data);
      });


    });

    function mandarMensaje(){
      //console.log('en la funcion mandar mensaje :)');
      //chat.emit('mensaje','mensaje del cliente');
      usuario.cuarto=document.getElementById("cuarto").value;
      usuario.nick=document.getElementById("nick").value;
      usuario.mensaje=document.getElementById("mensaje").value;
      chat.emit('mensaje',usuario);
    }


    </script>
  </body>
</html>
